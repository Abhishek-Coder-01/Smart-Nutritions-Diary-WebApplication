{% extends "layout.html" %}

{% block mainnn %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<div class="container mt-4">
    <!-- Header with food icon -->
    <div class="card mb-4 border-success">
        <div class="card-header bg-success text-white d-flex align-items-center">
            <i class="fas fa-utensils fa-2x mr-3"></i>
            <div>
                <h4 class="mb-0">Food Product Analysis</h4>
                <p class="mb-0">Detailed nutritional information for: <span class="font-weight-bold">{{ product_single }}</span></p>
            </div>
        </div>
    </div>

    <!-- Main Components Card -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-success text-white d-flex align-items-center">
            <i class="fas fa-chart-pie mr-2"></i>
            <h5 class="mb-0">Macronutrients (per 100g)</h5>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-bordered table-hover mb-0">
                    <thead class="thead-light">
                        <tr>
                            <th><i class="fas fa-tint mr-1"></i> Water (g)</th>
                            <th><i class="fas fa-bolt mr-1"></i> Energy (kcal)</th>
                            <th><i class="fas fa-dumbbell mr-1"></i> Protein (g)</th>
                            <th><i class="fas fa-bacon mr-1"></i> Fat (g)</th>
                            <th><i class="fas fa-bread-slice mr-1"></i> Carbs (g)</th>
                            <th><i class="fas fa-seedling mr-1"></i> Fiber (g)</th>
                            <th><i class="fas fa-candy-cane mr-1"></i> Sugar (g)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in food_plc %}
                        <tr>
                            <td>{{ row["Water_g"] }}</td>
                            <td><span class="badge badge-warning">{{ row.Energ_Kcal }}</span></td>
                            <td>{{ row.Protein_g }}</td>
                            <td>{{ row.Lipid_Tot_g}}</td>
                            <td>{{ row.Carbohydrt_g }}</td>
                            <td>{{ row.Fiber_TD_g}}</td>
                            <td>{{ row.Sugar_Tot_g }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Minerals Card -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white d-flex align-items-center">
            <i class="fas fa-gem mr-2"></i>
            <h5 class="mb-0">Minerals (per 100g)</h5>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-bordered table-hover mb-0">
                    <thead class="thead-light">
                        <tr>
                            <th><i class="fas fa-bone mr-1"></i> Calcium (mg)</th>
                            <th><i class="fas fa-magnet mr-1"></i> Iron (mg)</th>
                            <th><i class="fas fa-atom mr-1"></i> Magnesium (mg)</th>
                            <th><i class="fas fa-fire mr-1"></i> Phosphorus (mg)</th>
                            <th><i class="fas fa-battery-three-quarters mr-1"></i> Potassium (mg)</th>
                            <th><i class="fas fa-salt mr-1"></i> Sodium (mg)</th>
                            <th><i class="fas fa-shield-alt mr-1"></i> Zinc (mg)</th>
                            <th><i class="fas fa-coins mr-1"></i> Copper (mg)</th>
                            <th><i class="fas fa-star mr-1"></i> Manganese (mg)</th>
                            <th><i class="fas fa-shield-virus mr-1"></i> Selenium (µg)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in food_min %}
                        <tr>
                            <td>{{ row.Calcium_mg }}</td>
                            <td><span class="badge badge-danger">{{ row.Iron_mg }}</span></td>
                            <td>{{ row.Magnesium_mg}}</td>
                            <td>{{ row.Phosphorus_mg }}</td>
                            <td>{{ row.Potassium_mg}}</td>
                            <td>{{ row.Sodium_mg }}</td>
                            <td>{{ row.Zinc_mg}}</td>
                            <td>{{ row.Copper_mg }}</td>
                            <td>{{ row.Manganese_mg }}</td>
                            <td>{{ row.Selenium_µg }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Vitamins Card with Tabs -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-warning text-dark d-flex align-items-center">
            <i class="fas fa-pills mr-2"></i>
            <h5 class="mb-0">Vitamins (per 100g)</h5>
        </div>
        <div class="card-body p-0">
            <ul class="nav nav-tabs" id="vitaminTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="water-soluble-tab" data-toggle="tab" href="#water-soluble" role="tab">
                        <i class="fas fa-tint mr-1"></i> Water Soluble
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="fat-soluble-tab" data-toggle="tab" href="#fat-soluble" role="tab">
                        <i class="fas fa-oil-can mr-1"></i> Fat Soluble
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="fatty-acids-tab" data-toggle="tab" href="#fatty-acids" role="tab">
                        <i class="fas fa-fire mr-1"></i> Fatty Acids
                    </a>
                </li>
            </ul>
            <div class="tab-content p-3">
                <!-- Water Soluble Vitamins -->
                <div class="tab-pane fade show active" id="water-soluble" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="thead-light">
                                <tr>
                                    <th><i class="fas fa-lemon mr-1"></i> Vitamin C (mg)</th>
                                    <th><i class="fas fa-virus mr-1"></i> Thiamin (B1) (mg)</th>
                                    <th><i class="fas fa-bolt mr-1"></i> Riboflavin (B2) (mg)</th>
                                    <th><i class="fas fa-brain mr-1"></i> Niacin (B3) (mg)</th>
                                    <th><i class="fas fa-egg mr-1"></i> Pantothenic Acid (B5) (mg)</th>
                                    <th><i class="fas fa-seedling mr-1"></i> Vitamin B6 (mg)</th>
                                    <th><i class="fas fa-leaf mr-1"></i> Folate (B9) (µg)</th>
                                    <th><i class="fas fa-flask mr-1"></i> Vitamin B12 (µg)</th>
                                    <th><i class="fas fa-brain mr-1"></i> Choline (mg)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in food_vit1 %}
                                <tr>
                                    <td><span class="badge badge-info">{{ row["Vit_C_mg"] }}</span></td>
                                    <td>{{ row.Thiamin_mg }}</td>
                                    <td>{{ row.Riboflavin_mg }}</td>
                                    <td>{{ row.Niacin_mg}}</td>
                                    <td>{{ row.Panto_Acid_mg }}</td>
                                    <td>{{ row.Vit_B6_mg}}</td>
                                    <td>{{ row.Folate_Tot_µg }}</td>
                                    <td><span class="badge badge-primary">{{ row["Vit_B12_µg"] }}</span></td>
                                    <td>{{ row.Choline_Tot_mg }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Fat Soluble Vitamins -->
                <div class="tab-pane fade" id="fat-soluble" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="thead-light">
                                <tr>
                                    <th><i class="fas fa-eye mr-1"></i> Vitamin A (IU)</th>
                                    <th><i class="fas fa-carrot mr-1"></i> Vitamin A (RAE)</th>
                                    <th><i class="fas fa-fish mr-1"></i> Retinol (µg)</th>
                                    <th><i class="fas fa-apple-alt mr-1"></i> Beta-Carotene (µg)</th>
                                    <th><i class="fas fa-sun mr-1"></i> Vitamin E (mg)</th>
                                    <th><i class="fas fa-sun mr-1"></i> Vitamin D (µg)</th>
                                    <th><i class="fas fa-sun mr-1"></i> Vitamin D (IU)</th>
                                    <th><i class="fas fa-band-aid mr-1"></i> Vitamin K (µg)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in food_vit2 %}
                                <tr>
                                    <td>{{ row.Vit_A_IU }}</td>
                                    <td>{{ row.Vit_A_RAE }}</td>
                                    <td>{{ row.Retinol_µg }}</td>
                                    <td><span class="badge badge-warning">{{ row.Beta_Carot_µg }}</span></td>
                                    <td>{{ row.Vit_E_mg }}</td>
                                    <td>{{ row.Vit_D_µg }}</td>
                                    <td>{{ row["Vit_D_IU"] }}</td>
                                    <td><span class="badge badge-success">{{ row.Vit_K_µg }}</span></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Fatty Acids -->
                <div class="tab-pane fade" id="fatty-acids" role="tabpanel">
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="thead-light">
                                <tr>
                                    <th><i class="fas fa-exclamation-triangle mr-1"></i> Saturated Fat (g)</th>
                                    <th><i class="fas fa-heart mr-1"></i> Monounsaturated (g)</th>
                                    <th><i class="fas fa-heartbeat mr-1"></i> Polyunsaturated (g)</th>
                                    <th><i class="fas fa-skull mr-1"></i> Cholesterol (mg)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in food_vit3 %}
                                <tr>
                                    <td class="{{ 'table-danger' if row.FA_Sat_g|float > 5 else '' }}">{{ row.FA_Sat_g }}</td>
                                    <td class="{{ 'table-success' if row.FA_Mono_g|float > 3 else '' }}">{{ row.FA_Mono_g }}</td>
                                    <td class="{{ 'table-success' if row.FA_Poly_g|float > 1 else '' }}">{{ row.FA_Poly_g }}</td>
                                    <td class="{{ 'table-danger' if row.Cholestrl_mg|float > 100 else '' }}">{{ row.Cholestrl_mg }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <div class="alert alert-info mt-3">
                            <i class="fas fa-info-circle mr-2"></i>
                            <strong>Fatty Acid Guidance:</strong> 
                            <span class="text-danger"><i class="fas fa-exclamation-circle"></i> Red</span> indicates higher values, 
                            <span class="text-success"><i class="fas fa-check-circle"></i> Green</span> indicates beneficial values
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Summary Card -->
    <div class="card border-info mb-4">
        <div class="card-header bg-info text-white d-flex align-items-center">
            <i class="fas fa-clipboard-check mr-2"></i>
            <h5 class="mb-0">Quick Nutrition Facts</h5>
        </div>
        <div class="card-body">
            <div class="row text-center">
                {% for row in food_plc %}
                <div class="col-md-3 mb-3">
                    <div class="p-3 bg-light rounded">
                        <i class="fas fa-bolt fa-2x text-warning mb-2"></i>
                        <h5>{{ row.Energ_Kcal }} kcal</h5>
                        <small class="text-muted">Energy</small>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="p-3 bg-light rounded">
                        <i class="fas fa-dumbbell fa-2x text-primary mb-2"></i>
                        <h5>{{ row.Protein_g }}g</h5>
                        <small class="text-muted">Protein</small>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="p-3 bg-light rounded">
                        <i class="fas fa-bread-slice fa-2x text-danger mb-2"></i>
                        <h5>{{ row.Carbohydrt_g }}g</h5>
                        <small class="text-muted">Carbs</small>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="p-3 bg-light rounded">
                        <i class="fas fa-bacon fa-2x text-secondary mb-2"></i>
                        <h5>{{ row.Lipid_Tot_g }}g</h5>
                        <small class="text-muted">Fat</small>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script>
      document.addEventListener('DOMContentLoaded', function() {
        // Change navbar color to green for add food page
        const navbar = document.querySelector('.navbar');
        if (navbar) {
            navbar.style.background = 'linear-gradient(135deg, #28a745, #218838)';
        }
        
        // Hide other sections if needed
        const sectionsToHide = ['.hero-section', '.features-section'];
        sectionsToHide.forEach(selector => {
            const el = document.querySelector(selector);
            if(el) el.style.display = 'none';
        });
    });
</script>

<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

{% endblock %}